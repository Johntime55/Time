private static bool ImportFileToDb(List<Library> fileData, Logger logger)
{
    bool success = false;
    try
    {
        var db = new I_CoposEntities();

        // Verifică duplicatelor și elimină-le
        var isbn13List = fileData.Select(item => item.Isbn13).ToList();
        var existingBooks = db.Libraries.Where(b => isbn13List.Contains(b.Id)).ToList();
        if (existingBooks.Count > 0)
        {
            db.BulkDelete(existingBooks); // Folosește funcționalitatea de bulk delete
            db.SaveChanges();
            Console.WriteLine($"Deleted {existingBooks.Count} duplicate entries using bulk delete.");
            logger.Log($"Deleted {existingBooks.Count} duplicate entries using bulk delete.");
        }

        // Inserează în blocuri (bulk insert)
        if (fileData.Count > 0)
        {
            db.BulkInsert(fileData); // Folosește funcționalitatea de bulk insert
            Console.WriteLine($"Inserted {fileData.Count} new records using bulk insert.");
            logger.Log($"Inserted {fileData.Count} new records using bulk insert.");
        }

        success = true;
    }
    catch (Exception ex)
    {
        logger.Log($"Error importing data: {ex.Message}");
    }
    return success;
}
￼Enter
